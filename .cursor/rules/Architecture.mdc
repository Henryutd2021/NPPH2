---
description: Best practices and design principles for high-level architecture decisions, technical choices, and system modularization in this project.
globs: 
alwaysApply: false
---
---
name: architecture-guidelines
description: Best practices and design principles for high-level architecture decisions, technical choices, and system modularization in this project.
appliesTo: ["**/*.ts", "**/*.tsx", "**/*.js", "**/*.jsx", "**/*.py", "**/*.md"]
type: agent_requested
---

## ğŸ—ï¸ High-Level Architecture Guidelines

This rule provides architectural standards, patterns, and decision criteria used across the project. Cursor can reference this rule when making structural decisions, choosing frameworks, or proposing design patterns.

### ğŸ”² Modular Architecture

- The project should follow a **modular architecture**, where each domain or feature is isolated in its own module or directory.
- Favor **feature-based folder structure** over type-based (e.g., `features/user`, `features/payment`, instead of `components/`, `services/`, etc.).
- All modules should be **loosely coupled** and **highly cohesive**.

### ğŸ§± Design Patterns

- Prefer **composition over inheritance**.
- Use **factory functions**, **dependency injection**, or **service containers** to manage complexity and testability.
- When appropriate, follow patterns like:
  - **Repository Pattern** for data access abstraction
  - **Adapter Pattern** to wrap external libraries or APIs
  - **Strategy Pattern** for interchangeable logic blocks (e.g., pricing strategies, authorization flows)

### ğŸš¦ Tech Stack Decision Principles

When choosing libraries, packages, or frameworks:

- Prioritize **long-term maintainability** and **ecosystem maturity**.
- Avoid introducing niche dependencies unless they provide significant benefits.
- For frontend: use **React with TypeScript** and Tailwind for UI.
- For backend: use **Node.js with TypeScript** (or Python if necessary for ML/data pipelines).
- For state management: prefer **React Query** or **Zustand** over Redux (unless global sync complexity arises).

### ğŸ“ Example Feature Folder Structure

energy_system_optimization/
â”œâ”€â”€ src/                           # Source code directory
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_io.py                 # Data input/output utilities
â”‚   â”œâ”€â”€ model.py                   # Core optimization model
â”‚   â”œâ”€â”€ config.py                  # Configuration settings
â”‚   â”œâ”€â”€ logging_setup.py           # Logging configuration
â”‚   â”œâ”€â”€ utils/                     # Utility functions
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data_processing.py
â”‚   â”‚   â”œâ”€â”€ validation.py
â”‚   â”‚   â””â”€â”€ visualization.py
â”‚   â”œâ”€â”€ components/                # System components
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ nuclear.py
â”‚   â”‚   â”œâ”€â”€ electrolyzer.py
â”‚   â”‚   â”œâ”€â”€ battery.py
â”‚   â”‚   â””â”€â”€ h2_storage.py
â”‚   â”œâ”€â”€ markets/                   # Market participation
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_market.py
â”‚   â”‚   â”œâ”€â”€ energy_market.py
â”‚   â”‚   â”œâ”€â”€ ancillary_services.py
â”‚   â”‚   â””â”€â”€ iso_specific/         # ISO-specific implementations
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ caiso.py
â”‚   â”‚       â”œâ”€â”€ ercot.py
â”‚   â”‚       â”œâ”€â”€ pjm.py
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ optimization/             # Optimization algorithms
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ solver.py
â”‚       â”œâ”€â”€ constraints.py
â”‚       â””â”€â”€ objectives.py
â”‚
â”œâ”€â”€ input/                        # Input data directory
â”‚   â”œâ”€â”€ hourly_data/             # Hourly data files
â”‚   â”‚   â”œâ”€â”€ caiso/
â”‚   â”‚   â”œâ”€â”€ ercot/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ system_data/             # System configuration data
â”‚   â””â”€â”€ market_data/             # Market-specific data
â”‚
â”œâ”€â”€ output/                      # Output directory
â”‚   â”œâ”€â”€ results/                 # Optimization results
â”‚   â”œâ”€â”€ plots/                   # Generated plots
â”‚   â””â”€â”€ reports/                 # Analysis reports
â”‚
â”œâ”€â”€ tests/                       # Test directory
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_data_io.py
â”‚   â”œâ”€â”€ test_model.py
â”‚   â””â”€â”€ test_components/
â”‚
â”œâ”€â”€ docs/                        # Documentation
â”‚   â”œâ”€â”€ api/                     # API documentation
â”‚   â”œâ”€â”€ user_guide/             # User documentation
â”‚   â””â”€â”€ examples/               # Example usage
â”‚
â”œâ”€â”€ scripts/                     # Utility scripts
â”‚   â”œâ”€â”€ setup.py                # Installation script
â”‚   â”œâ”€â”€ run_optimization.py     # Main execution script
â”‚   â””â”€â”€ data_preparation.py     # Data preparation utilities
â”‚
â”œâ”€â”€ config/                      # Configuration files
â”‚   â”œâ”€â”€ logging_config.yaml
â”‚   â”œâ”€â”€ model_config.yaml
â”‚   â””â”€â”€ market_config.yaml
â”‚
â”œâ”€â”€ logs/                        # Log files
â”‚   â”œâ”€â”€ optimization/
â”‚   â”œâ”€â”€ market_data/
â”‚   â””â”€â”€ system_operations/
â”‚
â”œâ”€â”€ requirements.txt             # Python dependencies
â”œâ”€â”€ setup.py                     # Package setup file
â”œâ”€â”€ README.md                    # Project documentation
â”œâ”€â”€ LICENSE                      # License file
â””â”€â”€ .gitignore                  # Git ignore file


### âš ï¸ What to Avoid

- Avoid deeply nested folders unless necessary.
- Avoid global state pollution â€” isolate logic per feature.
- Do not hardcode configuration values â€” always use `env` or centralized config.

### ğŸ§­ Guiding Principles

- **Scalability**: Architecture should support growth in feature count and contributors.
- **Maintainability**: Code should be understandable and modifiable by any team member.
- **Separation of Concerns**: Keep UI, business logic, and data access well-separated.

Cursor can reference this rule when asked to:
- Propose folder structures
- Choose between design patterns
- Recommend tech stacks or libraries
- Refactor for modularity or clean architecture

---

